package github.com/hashicorp/terraform-provider-azurerm/internal/tools/document-lint/check
import (
	"fmt"
	"strings"

	"github.com/hashicorp/terraform-provider-azurerm/internal/tools/document-lint/md"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tools/document-lint/util"
)
func (c defaultDiff) Fix(line string) (result string, err error) {
	if idxs := md.DefaultsReg.FindStringSubmatchIndex(line); len(idxs) > 2 {
		if c.Default == "" {
			// remove default part from line
			line = line[:idxs[0]+1] + line[idxs[1]:]
		} else {
			line = line[:idxs[2]] + "`" + c.Default + "`" + line[idxs[3]:]
		}
	} else if c.Default != "" {
		line = strings.TrimSpace(line) + " Defaults to `" + c.Default + "`."
	}
	return line, nil
}
