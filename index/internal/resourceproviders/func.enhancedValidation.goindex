package github.com/hashicorp/terraform-provider-azurerm/internal/resourceproviders
import (
	"fmt"
	"strings"

	"github.com/hashicorp/terraform-provider-azurerm/internal/features"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/validation"
)
func enhancedValidation(i interface{}, k string) ([]string, []error) {
	v, ok := i.(string)
	if !ok {
		return nil, []error{fmt.Errorf("expected type of %q to be string", k)}
	}

	if v == "" {
		return nil, []error{fmt.Errorf("%q must not be empty", k)}
	}

	// enhanced validation is unavailable, but we're in this method..
	if cachedResourceProviders == nil {
		return nil, nil
	}

	found := false
	for _, provider := range *cachedResourceProviders {
		if provider == v {
			found = true
		}
	}

	if !found {
		providersJoined := strings.Join(*cachedResourceProviders, ", ")
		return nil, []error{
			fmt.Errorf("%q was not found in the list of supported Resource Providers: %q", v, providersJoined),
		}
	}

	return nil, nil
}
