package github.com/hashicorp/terraform-provider-azurerm/internal/services/consumption/migration
import (
	"context"
	"fmt"

	"github.com/hashicorp/go-azure-helpers/resourcemanager/commonids"
	"github.com/hashicorp/go-azure-sdk/resource-manager/consumption/2019-10-01/budgets"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
)
func (SubscriptionConsumptionBudgetV0ToV1) UpgradeFunc() pluginsdk.StateUpgraderFunc {
	return func(ctx context.Context, rawState map[string]interface{}, meta interface{}) (map[string]interface{}, error) {
		// The previous validation behaviour of subscription_id meant that we were only accepting this format 00000000-0000-0000-0000-000000000000,
		// but we should be accepting /subscriptions/00000000-0000-0000-0000-000000000000

		// NOTE: this is an intentional bug which is fixed in v2 of the state migration
		rawState["subscription_id"] = commonids.NewSubscriptionID(rawState["subscription_id"].(string))
		return rawState, nil
	}
}
