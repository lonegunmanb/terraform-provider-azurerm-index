package github.com/hashicorp/terraform-provider-azurerm/internal/services/costmanagement/parse
import (
	"fmt"
	"regexp"
	"strings"
)
func CostManagementExportID(input string) (*CostManagementExportId, error) {
	// in general, the id of a assignment should be:
	// {scope}/providers/Microsoft.CostManagement/exports/{name}
	regex := regexp.MustCompile(`/providers/Microsoft\.CostManagement/exports/`)
	if !regex.MatchString(input) {
		return nil, fmt.Errorf("unable to parse Cost Management Export ID %q", input)
	}

	segments := regex.Split(input, -1)

	if len(segments) != 2 {
		return nil, fmt.Errorf("unable to parse Cost Management Export ID %q: Expected 2 segments after split", input)
	}

	scope := segments[0]
	name := segments[1]
	if name == "" {
		return nil, fmt.Errorf("unable to parse Cost Management Export ID %q: export name is empty", input)
	}

	return &CostManagementExportId{
		Name:  name,
		Scope: scope,
	}, nil
}
