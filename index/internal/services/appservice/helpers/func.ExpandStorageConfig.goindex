package github.com/hashicorp/terraform-provider-azurerm/internal/services/appservice/helpers
import (
	"fmt"
	"strings"
	"time"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/web/2023-12-01/webapps"
	"github.com/hashicorp/terraform-plugin-sdk/v2/helper/schema"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/validation"
)
func ExpandStorageConfig(storageConfigs []StorageAccount) *webapps.AzureStoragePropertyDictionaryResource {
	storageAccounts := make(map[string]webapps.AzureStorageInfoValue)
	result := &webapps.AzureStoragePropertyDictionaryResource{}
	if len(storageConfigs) == 0 {
		result.Properties = &storageAccounts
		return result
	}

	for _, v := range storageConfigs {
		storageAccounts[v.Name] = webapps.AzureStorageInfoValue{
			Type:        pointer.To(webapps.AzureStorageType(v.Type)),
			AccountName: pointer.To(v.AccountName),
			ShareName:   pointer.To(v.ShareName),
			AccessKey:   pointer.To(v.AccessKey),
			MountPath:   pointer.To(v.MountPath),
		}
	}

	result.Properties = &storageAccounts

	return result
}
