package github.com/hashicorp/terraform-provider-azurerm/internal/services/appservice/helpers
import (
	"fmt"
	"strings"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
)
func EncodeDockerFxStringWindows(image string, registryUrl string) string {
	template := "DOCKER|%s/%s"
	dockerHubTemplate := "DOCKER|%s"

	registryUrl = trimURLScheme(registryUrl)

	// Windows App Services fail to auth if the index portion of the image ref is `index.docker.io` so it must not be included.
	if strings.EqualFold(registryUrl, "index.docker.io") {
		return fmt.Sprintf(dockerHubTemplate, image)
	}

	return fmt.Sprintf(template, registryUrl, image)
}
