package github.com/hashicorp/terraform-provider-azurerm/internal/services/appservice/helpers
import (
	"fmt"
	"strconv"
	"strings"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/web/2023-12-01/webapps"
	"github.com/hashicorp/terraform-plugin-sdk/v2/helper/schema"
	"github.com/hashicorp/terraform-provider-azurerm/internal/features"
	"github.com/hashicorp/terraform-provider-azurerm/internal/sdk"
	apimValidate "github.com/hashicorp/terraform-provider-azurerm/internal/services/apimanagement/validate"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/validation"
)
func updateOrAppendAppSettings(input []webapps.NameValuePair, name string, value string, remove bool) []webapps.NameValuePair {
	for k, v := range input {
		if v.Name != nil && *v.Name == name {
			if remove {
				input[k] = input[len(input)-1]
				input[len(input)-1] = webapps.NameValuePair{}
				input = input[:len(input)-1]
			} else {
				input[k] = webapps.NameValuePair{
					Name:  pointer.To(name),
					Value: pointer.To(value),
				}
			}
			return input
		}
	}

	if !remove {
		input = append(input, webapps.NameValuePair{
			Name:  pointer.To(name),
			Value: pointer.To(value),
		})
	}

	return input
}
