package github.com/hashicorp/terraform-provider-azurerm/internal/services/containerapps/helpers
import (
	"strings"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/containerapps/2024-03-01/managedenvironments"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/validation"
)
func FlattenWorkloadProfiles(input *[]managedenvironments.WorkloadProfile, consumptionDefined bool) []WorkloadProfileModel {
	if input == nil || len(*input) == 0 {
		return []WorkloadProfileModel{}
	}
	result := make([]WorkloadProfileModel, 0)

	for _, v := range *input {
		if strings.EqualFold(v.WorkloadProfileType, string(WorkloadProfileSkuConsumption)) && !consumptionDefined {
			continue
		}
		result = append(result, WorkloadProfileModel{
			Name:                v.Name,
			MaximumCount:        pointer.From(v.MaximumCount),
			MinimumCount:        pointer.From(v.MinimumCount),
			WorkloadProfileType: v.WorkloadProfileType,
		})
	}

	return result
}
