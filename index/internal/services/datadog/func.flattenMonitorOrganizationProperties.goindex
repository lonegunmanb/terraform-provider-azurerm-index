package github.com/hashicorp/terraform-provider-azurerm/internal/services/datadog
import (
	"fmt"
	"log"
	"time"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-helpers/lang/response"
	"github.com/hashicorp/go-azure-helpers/resourcemanager/commonschema"
	"github.com/hashicorp/go-azure-helpers/resourcemanager/location"
	"github.com/hashicorp/go-azure-helpers/resourcemanager/tags"
	"github.com/hashicorp/go-azure-sdk/resource-manager/datadog/2021-03-01/monitorsresource"
	"github.com/hashicorp/terraform-provider-azurerm/helpers/tf"
	"github.com/hashicorp/terraform-provider-azurerm/internal/clients"
	"github.com/hashicorp/terraform-provider-azurerm/internal/services/datadog/validate"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/internal/timeouts"
	"github.com/hashicorp/terraform-provider-azurerm/utils"
)
func flattenMonitorOrganizationProperties(input *monitorsresource.DatadogOrganizationProperties, d *pluginsdk.ResourceData) []interface{} {
	organisationProperties := d.Get("datadog_organization").([]interface{})
	if len(organisationProperties) == 0 {
		return make([]interface{}, 0)
	}
	v := organisationProperties[0].(map[string]interface{})

	var name string
	if input.Name != nil {
		name = *input.Name
	}
	var id string
	if input.Id != nil {
		id = *input.Id
	}
	var redirectUri string
	if input.RedirectUri != nil {
		redirectUri = *input.RedirectUri
	}
	var enterpriseAppId string
	if input.EnterpriseAppId != nil {
		enterpriseAppId = *input.EnterpriseAppId
	}
	return []interface{}{
		map[string]interface{}{
			"name":              name,
			"api_key":           utils.String(v["api_key"].(string)),
			"application_key":   utils.String(v["application_key"].(string)),
			"enterprise_app_id": enterpriseAppId,
			"linking_auth_code": utils.String(v["linking_auth_code"].(string)),
			"linking_client_id": utils.String(v["linking_client_id"].(string)),
			"redirect_uri":      redirectUri,
			"id":                id,
		},
	}
}
