package github.com/hashicorp/terraform-provider-azurerm/internal/services/devtestlabs
import (
	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/devtestlab/2018-09-15/virtualmachines"
	"github.com/hashicorp/terraform-provider-azurerm/helpers/validate"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/validation"
)
func expandDevTestLabVirtualMachineNatRules(input *pluginsdk.Set) []virtualmachines.InboundNatRule {
	rules := make([]virtualmachines.InboundNatRule, 0)
	if input == nil {
		return rules
	}

	for _, val := range input.List() {
		v := val.(map[string]interface{})
		backendPort := v["backend_port"].(int)
		protocol := virtualmachines.TransportProtocol(v["protocol"].(string))

		rule := virtualmachines.InboundNatRule{
			TransportProtocol: &protocol,
			BackendPort:       pointer.To(int64(backendPort)),
		}

		rules = append(rules, rule)
	}

	return rules
}
