package github.com/hashicorp/terraform-provider-azurerm/internal/services/appconfiguration/azuresdkhacks
import (
	"context"
	"encoding/json"
	"fmt"
	"net/http"
	"strings"

	"github.com/Azure/go-autorest/autorest"
	"github.com/Azure/go-autorest/autorest/date"
	"github.com/Azure/go-autorest/autorest/to"
	"github.com/Azure/go-autorest/tracing"
)
func (kvlr KeyValueListResult) keyValueListResultPreparer(ctx context.Context, endpoint string) (*http.Request, error) {
	if !kvlr.hasNextLink() {
		return nil, nil
	}

	nextLinkWithEndpoint := *kvlr.NextLink
	if !strings.HasPrefix(*kvlr.NextLink, endpoint) {
		nextLinkWithEndpoint = fmt.Sprintf("%s%s", endpoint, *kvlr.NextLink)
	}

	return autorest.Prepare((&http.Request{}).WithContext(ctx),
		autorest.AsJSON(),
		autorest.AsGet(),
		autorest.WithBaseURL(to.String(&nextLinkWithEndpoint)))
}
