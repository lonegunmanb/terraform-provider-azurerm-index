package github.com/hashicorp/terraform-provider-azurerm/internal/services/cdn/validate
import (
	"fmt"
	"strconv"
	"strings"

	"github.com/hashicorp/go-azure-sdk/resource-manager/cdn/2024-09-01/rules"
	"github.com/hashicorp/terraform-provider-azurerm/helpers/validate"
)
func CdnFrontDoorActionsBlock(actions []rules.DeliveryRuleAction) error {
	urlRewrite := false
	urlRedirect := false

	for _, rule := range actions {
		if rule.DeliveryRuleAction().Name == rules.DeliveryRuleActionNameURLRewrite {
			urlRewrite = true
		}

		if rule.DeliveryRuleAction().Name == rules.DeliveryRuleActionNameURLRedirect {
			urlRedirect = true
		}
	}

	if urlRedirect && urlRewrite {
		return fmt.Errorf("the %q and the %q are both present in the %q block which is invalid", "url_redirect_action", "url_rewrite_action", "actions")
	}

	return nil
}
