package github.com/hashicorp/terraform-provider-azurerm/internal/services/cdn/frontdooractions
import (
	"fmt"
	"strings"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/cdn/2024-09-01/rules"
	"github.com/hashicorp/terraform-provider-azurerm/internal/services/cdn/parse"
	"github.com/hashicorp/terraform-provider-azurerm/utils"
)
func FlattenCdnFrontDoorUrlRedirectAction(input rules.URLRedirectAction) map[string]interface{} {
	var destinationHost string
	var destinationPath string
	var queryString string
	var fragment string

	params := input.Parameters

	if params.CustomHostname != nil {
		destinationHost = *params.CustomHostname
	}
	if params.CustomPath != nil {
		destinationPath = *params.CustomPath
	}
	if params.CustomQueryString != nil {
		queryString = *params.CustomQueryString
	}

	destinationProtocol := string(pointer.From(params.DestinationProtocol))
	redirectType := string(params.RedirectType)

	if params.CustomFragment != nil {
		fragment = *params.CustomFragment
	}

	return map[string]interface{}{
		"destination_hostname": destinationHost,
		"destination_path":     destinationPath,
		"query_string":         queryString,
		"redirect_protocol":    destinationProtocol,
		"redirect_type":        redirectType,
		"destination_fragment": fragment,
	}
}
