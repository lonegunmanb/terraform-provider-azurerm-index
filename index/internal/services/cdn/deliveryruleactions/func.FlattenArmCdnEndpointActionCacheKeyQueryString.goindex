package github.com/hashicorp/terraform-provider-azurerm/internal/services/cdn/deliveryruleactions
import (
	"errors"

	"github.com/Azure/azure-sdk-for-go/services/cdn/mgmt/2020-09-01/cdn" // nolint: staticcheck
	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/validation"
)
func FlattenArmCdnEndpointActionCacheKeyQueryString(input cdn.BasicDeliveryRuleAction) (*map[string]interface{}, error) {
	action, ok := input.AsDeliveryRuleCacheKeyQueryStringAction()
	if !ok {
		return nil, errors.New("expected a delivery rule cache key query string action")
	}

	behaviour := ""
	parameters := ""
	if params := action.Parameters; params != nil {
		behaviour = string(params.QueryStringBehavior)

		if params.QueryParameters != nil {
			parameters = *params.QueryParameters
		}
	}

	return &map[string]interface{}{
		"behavior":   behaviour,
		"parameters": parameters,
	}, nil
}
