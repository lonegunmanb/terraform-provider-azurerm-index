package github.com/hashicorp/terraform-provider-azurerm/internal/services/network/parse
import (
	"fmt"
	"strings"

	"github.com/hashicorp/go-azure-helpers/resourcemanager/resourceids"
	"github.com/hashicorp/go-azure-sdk/resource-manager/network/2024-05-01/applicationsecuritygroups"
	"github.com/hashicorp/go-azure-sdk/resource-manager/network/2024-05-01/privateendpoints"
)
func PrivateEndpointApplicationSecurityGroupAssociationID(input string) (PrivateEndpointApplicationSecurityGroupAssociationId, error) {
	splitId := strings.Split(input, "|")
	if len(splitId) != 2 {
		return PrivateEndpointApplicationSecurityGroupAssociationId{}, fmt.Errorf("expected ID to be in the format {PrivateEndpointId}|{ApplicationSecurityGroupId} but got %q", input)
	}

	endpointId, err := privateendpoints.ParsePrivateEndpointID(splitId[0])
	if err != nil {
		return PrivateEndpointApplicationSecurityGroupAssociationId{}, err
	}

	securityGroupId, err := applicationsecuritygroups.ParseApplicationSecurityGroupID(splitId[1])
	if err != nil {
		return PrivateEndpointApplicationSecurityGroupAssociationId{}, err
	}

	if endpointId == nil || securityGroupId == nil {
		return PrivateEndpointApplicationSecurityGroupAssociationId{}, fmt.Errorf("parse error, both PrivateEndpointId and ApplicationSecurityGroupId should not be nil")
	}

	return PrivateEndpointApplicationSecurityGroupAssociationId{
		PrivateEndpointId:          *endpointId,
		ApplicationSecurityGroupId: *securityGroupId,
	}, nil
}
