package github.com/hashicorp/terraform-provider-azurerm/internal/services/eventgrid
import (
	"fmt"
	"strings"

	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/eventgrid/2022-06-15/eventsubscriptions"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/utils"
)
func expandEventSubscriptionStorageQueueEndpoint(input []interface{}) eventsubscriptions.EventSubscriptionDestination {
	raw := input[0].(map[string]interface{})
	props := eventsubscriptions.StorageQueueEventSubscriptionDestinationProperties{
		ResourceId: pointer.To(raw["storage_account_id"].(string)),
		QueueName:  pointer.To(raw["queue_name"].(string)),
	}

	if ttlInSeconds := raw["queue_message_time_to_live_in_seconds"]; ttlInSeconds != 0 {
		queueMessageTimeToLiveInSeconds := int64(ttlInSeconds.(int))
		props.QueueMessageTimeToLiveInSeconds = &queueMessageTimeToLiveInSeconds
	}

	return eventsubscriptions.StorageQueueEventSubscriptionDestination{
		Properties: &props,
	}
}
