package github.com/hashicorp/terraform-provider-azurerm/internal/services/monitor
import (
	"github.com/hashicorp/go-azure-helpers/lang/pointer"
	"github.com/hashicorp/go-azure-sdk/resource-manager/insights/2018-04-16/scheduledqueryrules"
	"github.com/hashicorp/terraform-provider-azurerm/internal/tf/pluginsdk"
	"github.com/hashicorp/terraform-provider-azurerm/utils"
)
func expandMonitorScheduledQueryRulesCommonSource(d *pluginsdk.ResourceData) scheduledqueryrules.Source {
	authorizedResourceIDs := d.Get("authorized_resource_ids").(*pluginsdk.Set).List()
	dataSourceID := d.Get("data_source_id").(string)

	source := scheduledqueryrules.Source{
		AuthorizedResources: utils.ExpandStringSlice(authorizedResourceIDs),
		DataSourceId:        dataSourceID,
	}

	if query, ok := d.GetOk("query"); ok {
		source.Query = utils.String(query.(string))
	}
	if queryType, ok := d.GetOk("query_type"); ok {
		source.QueryType = pointer.To(scheduledqueryrules.QueryType(queryType.(string)))
	}

	return source
}
