package github.com/hashicorp/terraform-provider-azurerm/internal/common
import (
	"log"
	"net/http"
	"net/http/httputil"

	"github.com/hashicorp/go-azure-sdk/sdk/client"
)
func responseLoggerMiddleware(providerName string) client.ResponseMiddleware {
	return func(request *http.Request, response *http.Response) (*http.Response, error) {
		// dump response to wire format
		if dump, err2 := httputil.DumpResponse(response, true); err2 == nil {
			log.Printf("[DEBUG] %s Response for %s: \n%s\n", providerName, request.URL, dump)
		} else {
			// fallback to basic message
			log.Printf("[DEBUG] %s Response: %s for %s\n", providerName, response.Status, request.URL)
		}
		return response, nil
	}
}
